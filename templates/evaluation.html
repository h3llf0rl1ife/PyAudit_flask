{% extends "base.html" %}

{% block head %}
<link href="{{ url_for('static', filename='css/evaluation.css') }}" rel="stylesheet">
{% endblock %}

{% block body %}
  <div class="container">
    {% with messages = get_flashed_messages() %}
      {% if messages %}
        <ul class=flashes>
        {% for message in messages %}
          <li>{{ message }}</li>
        {% endfor %}
        </ul>
      {% endif %}
    {% endwith %}

    <form action="/evaluation/api" method="POST" enctype="multipart/form-data">
      {{ evaluation_form.csrf_token }}
      <div class="row section">
        <div class="valign-wrapper" id="evaluationID-wrapper">
          <span class="col s8 m9 l9"></span>
          <span class="right-align col s2 m2 l2">Index</span>
          <input class="center-align col s2 m1 l1 input-field" id="i-EvaluationID" value="{{ contexts.evaluationID }}" type="text" disabled>
        </div>
      </div>

      <div class="row">
        <div class="valign-wrapper">
          <span class="col s4 m3 l2">Site</span>
          <select class="col s8 m9 l10 browser-default" id="i-Site">
            <option value="" disabled selected>Selectionner</option>
            {% for site in contexts.sites %}
            <option value="{{ site.SiteID }}">{{ site.SiteName }}</option>
            {% endfor %}
          </select>
        </div>
      </div>

      <div class="row section">
        <div class="valign-wrapper">
          <span class="col s4 m3 l2">Zone</span>
          <select class="col s8 m9 l10 browser-default" id="i-Zone">
            <option value="" disabled selected>Selectionner</option>
          </select>
        </div>
      </div>

      <div class="row">
        <div class="valign-wrapper">
          <span class="col s4 m3 l2">Unit&eacute;</span>
          <select class="col s8 m9 l10 browser-default" id="i-Unit">
            <option value="" disabled selected>Selectionner</option>
          </select>
        </div>
      </div>

      <div class="row">
        <div class="valign-wrapper">
          <span class="col s4 m3 l2">Localisation</span>
          <select class="col s8 m9 l10 browser-default" id="i-Location" name="LocationID">
            <option value="" disabled selected>Selectionner</option>
          </select>
        </div>
      </div>

      <div class="row">
        <div class="valign-wrapper">
          <span class="col s4 m3 l2">Crit&egrave;re d'&eacute;valuation</span>
          <select class="col s8 m9 l10 browser-default" id="i-Criteria">
            <option value="" disabled selected>Selectionner</option>
            {% for criteria in contexts.criterias %}
            <option value="{{ criteria.CriteriaID }}">{{ criteria.Description }}</option>
            {% endfor %}
          </select>
        </div>
      </div>

      <div class="row section">
        <div class="valign-wrapper">
          <span class="col s4 m3 l2">Rubrique</span>
          <select class="col s8 m9 l10 browser-default" id="i-Category" name="CategoryID">
            <option value="" disabled selected>Selectionner</option>
          </select>
        </div>
      </div>

      <div class="row">
        <div class="valign-wrapper">
          <span class="col s4 m3 l2">Validation</span>
          <select class="col s8 m9 l10 browser-default" id="i-Validation" name="Validation">
            <option value="" disabled selected>Selectionner</option>
            <option value="1">Oui</option>
            <option value="0">Non</option>
          </select>
        </div>
      </div>

      <div class="row section">
        <div class="valign-wrapper">
          <span class="col s4 m3 l2">Remarque</span>
          <textarea class="col s8 m9 l10 materialize-textarea" id="i-Comment" name="Comment"></textarea>
        </div>
      </div>

      <div class="file-field input-field">
        <div class="btn waves-effect waves-light">
          <i class="material-icons" id="attach-btn">attachment</i>
          <input type="file" id="i-File" name="Attachment" multiple>
        </div>
        <div class="file-path-wrapper">
          <input class="file-path validate" id="i-File-Path" type="text">
        </div>
      </div>

      <div class="divider"></div>
      <div class="section">
        <div class="row" id="form-buttons">
          <div class="col s4">
            <div class="row">
              <div class="col s10 push-s2">
                <button class="col s12 hide-on-small-only show-on-medium-and-up truncate waves-effect waves-light btn green btn-ajouter" type="submit"><i class="material-icons left pnom">add</i>Ajouter</button>
                <button class="hide-on-med-and-up show-on-small btn-floating btn-large waves-effect waves-light green btn-ajouter" type="submit"><i class="material-icons">add</i></button>

                <button class="col s12 hide-on-small-only show-on-medium-and-up truncate waves-effect waves-light btn green hide btn-enregistrer" type="submit"><i class="material-icons left pnom">check</i>Enregistrer</button>
                <button class="hide-on-med-and-up show-on-small btn-floating btn-large waves-effect waves-light green hide btn-enregistrer" type="submit"><i class="material-icons">check</i></button>

              </div>
            </div>
          </div>
          <div class="col s8">
            <div class="row">
              <div class="col s5 offset-s1">
                <button class="col s12 hide-on-small-only show-on-medium-and-up truncate waves-effect waves-light btn blue btn-modifier" type="button"><i class="material-icons left pnom">edit</i>Modifier</button>
                <button class="hide-on-med-and-up show-on-small btn-floating btn-large waves-effect waves-light blue btn-modifier" type="button"><i class="material-icons">edit</i></button>

                <a class="col s12 hide-on-small-only show-on-medium-and-up truncate waves-effect waves-light btn blue hide btn-annuler" href="/evaluation"><i class="material-icons left pnom">close</i>Annuler</a>
                <a class="hide-on-med-and-up show-on-small btn-floating btn-large waves-effect waves-light blue hide btn-annuler" href="/evaluation"><i class="material-icons">close</i></a>
              </div>
              <div class="col s5">
                <button class="col s12 hide-on-small-only show-on-medium-and-up truncate waves-effect waves-light btn red disabled btn-supprimer" type="button"><i class="material-icons left pnom">delete</i>Supprimer</button>
                <button class="hide-on-med-and-up show-on-small btn-floating btn-large waves-effect waves-light red disabled btn-supprimer" type="button"><i class="material-icons">delete</i></button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </form>
  </div>


  
{% endblock %}

  {% block javascript %}
  <script type=text/javascript>
    //$SCRIPT_ROOT = {{ request.script_root|tojson|safe }};
    var csrf_token = "{{ csrf_token() }}";

    $.ajaxSetup({
        beforeSend: function(xhr, settings) {
            if (!/^(GET|HEAD|OPTIONS|TRACE)$/i.test(settings.type) && !this.crossDomain) {
                xhr.setRequestHeader("X-CSRFToken", csrf_token);
            }
        }
    });
  </script>
  <script type="text/javascript" src="{{ url_for('static', filename='js/evaluation.js') }}"></script>
  
  {% endblock %}
